<!doctype html>
<html>
<head>
<title>Example Domain</title>

<meta charset="utf-8" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="app.css">
</head>

<body>
<main>
<h1>Example Domain</h1>
<p><input type="file" id="input-file" accept="image/*"></p>
<p><canvas id="preview" width="1024" height="1024" title="Preview"></canvas></p>
<strong>
<p id="url"></p>
</strong>
<p>
<button onclick="selectFile()">Pilih File</button>
<a class="btn" download="avatar.png" id="dl" href="">Download</a>
</p>
<p>
<img src="placeholder.png" alt="Placeholder" width="1" id="placeholder" hidden></p>
</main>
      
<script src="app.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>
<script>
const imgfile = document.querySelector("#input-file");

imgfile.addEventListener("change", (event) => {
const selectedFile = event.target.files[0];
// FormData
const formData = new FormData();
formData.append("image", selectedFile);

// config
const config = {
headers: {
Authorization: "Client-ID 4ddb1cef2cbd23a", // YOUR_CLIENT_ID Imgur
},
};

// POST
axios
.post("https://api.imgur.com/3/image", formData, config)
.then((response) => {
console.log(response.data);
// link
const { link } = response.data.data;
console.log(link);
const preview = document.querySelector("#placeholder");
preview.src = link;
const imgLink = document.querySelector("#url");
imgLink.textContent = link;
})
.catch((error) => {
console.error(error);
// error
alert("error!");
});
});

function selectFile() {
document.getElementById("input-file").click();
}
</script>
<!--
<script>
canvas.addEventListener("touchstart", function (e) {
mousePos = getTouchPos(canvas, e);
var touch = e.touches[0];
var mouseEvent = new MouseEvent("mousedown", {
clientX: touch.clientX,
clientY: touch.clientY
});
canvas.dispatchEvent(mouseEvent);
}, false);
canvas.addEventListener("touchend", function (e) {
var mouseEvent = new MouseEvent("mouseup", {});
canvas.dispatchEvent(mouseEvent);
}, false);
canvas.addEventListener("touchmove", function (e) {
var touch = e.touches[0];
var mouseEvent = new MouseEvent("mousemove", {
clientX: touch.clientX,
clientY: touch.clientY
});
canvas.dispatchEvent(mouseEvent);
}, false);

// Get the position of a touch relative to the canvas
function getTouchPos(canvasDom, touchEvent) {
var rect = canvasDom.getBoundingClientRect();
return {
x: touchEvent.touches[0].clientX - rect.left,
y: touchEvent.touches[0].clientY - rect.top
};
}
document.body.addEventListener("touchstart", function (e) {
if (e.target == canvas) {
e.preventDefault();
}
}, false);
document.body.addEventListener("touchend", function (e) {
if (e.target == canvas) {
e.preventDefault();
}
}, false);
document.body.addEventListener("touchmove", function (e) {
if (e.target == canvas) {
e.preventDefault();
}
}, false);
</script>
-->
</body>
</html>
