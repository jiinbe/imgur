<!doctype html>
<html>
<head>
<title>Example Domain</title>

<meta charset="utf-8" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">
body {
background-color: #f0f0f2;
margin: 0;
padding: 0;
font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;        
}
main {
width: 600px;
margin: 5em auto;
padding: 2em;
background-color: #fdfdff;
border-radius: 0.5em;
box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);
}
a:link, a:visited {
color: #333;
text-decoration: none;
}
img, canvas {
width: 100%;
height: auto;
}
input[type="file"] {
display: none;
}
button[onclick*="()"] {
cursor: pointer;
}
button, .btn {
font-family: inherit;
font-size: inherit;
padding: 0.4em;
margin: 0 0 0.5em 0;
box-sizing: border-box;
border: 1px solid #ccc;
border-radius: 2px;
}
@media (max-width: 700px) {
main {
margin: 0 auto;
width: auto;
}
}
</style>    
</head>

<body>
<main>
<h1>Example Domain</h1>
<p><input type="file" id="input-file" accept="image/*"></p>
<p><canvas id="preview" width="1024" height="1024" title="Preview"></canvas></p>
<strong>
<p id="url"></p>
</strong>
<p>
<button onclick="selectFile()">Pilih File</button>
<a class="btn" download="avatar.png" id="dl" href="">Download</a>
</p>
<p><img src="placeholder.png" alt="Placeholder" width="1" id="placeholder" hidden></p>
</main>
      
<script src="app.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>
<script>
const imgfile = document.querySelector("#input-file");

imgfile.addEventListener("change", (event) => {
const selectedFile = event.target.files[0];
// FormData
const formData = new FormData();
formData.append("image", selectedFile);

// config
const config = {
headers: {
Authorization: "Client-ID 4ddb1cef2cbd23a", // YOUR_CLIENT_ID Imgur
},
};

// POST
axios
.post("https://api.imgur.com/3/image", formData, config)
.then((response) => {
console.log(response.data);
// link
const { link } = response.data.data;
console.log(link);
const preview = document.querySelector("#placeholder");
preview.src = link;
const imgLink = document.querySelector("#url");
imgLink.textContent = link;
})
.catch((error) => {
console.error(error);
// error
alert("error!");
});
});

function selectFile() {
document.getElementById("input-file").click();
}
</script>

<script type="text/javascript">
var can, ctx, canX, canY, mouseIsDown = 0;
function init() {
can = document.getElementById("preview");
ctx = can.getContext("2d");
document.body.addEventListener("mouseup", mouseUp, false);
document.body.addEventListener("touchcancel", touchUp, false);
}
function mouseUp() {
mouseIsDown = 0;
mouseXY();
}

function touchUp() {
mouseIsDown = 0;
// no touch to track, so just show state
showPos();
}

function mouseDown() {
mouseIsDown = 1;
mouseXY();
}

function touchDown() {
mouseIsDown = 1;
touchXY();
}

function mouseXY(e) {
if (!e)
var e = event;
canX = e.pageX - can.offsetLeft;
canY = e.pageY - can.offsetTop;
showPos();
}

function touchXY(e) {
if (!e)
var e = event;
e.preventDefault();
canX = e.targetTouches[0].pageX - can.offsetLeft;
canY = e.targetTouches[0].pageY - can.offsetTop;
showPos();
}

function showPos() {
// large, centered, bright green text
ctx.font = "24pt Helvetica";
ctx.textAlign = "center";
ctx.textBaseline = "middle";
ctx.fillStyle = "rgb(64,255,64)";
var str = canX + ", " + canY;
if (mouseIsDown)
str += " down";
if (!mouseIsDown)
str += " up";
ctx.clearRect(0, 0, can.width, can.height);
// draw text at center, max length to fit on canvas
ctx.fillText(str, can.width / 2, can.height / 2, can.width - 10);
// plot cursor
ctx.fillStyle = "white";
ctx.fillRect(canX - 5, canY - 5, 10, 10);
}

</script>
</body>
</html>
